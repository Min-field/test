{"version":3,"sources":["webpack:///src/components/page/Gift.vue","webpack:///./src/components/page/Gift.vue?bcb8","webpack:///./src/components/page/Gift.vue"],"names":["getData","content","msg","_this","this","pageSize","cur_page","data","val","_this2","FormData","templateImgSrc","title","text","param","then","response","error","row","_this3","_id","form","priority","undefined","_param","page_Gift","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","separator","_v","span","ref","name","type","accept","on","change","changeFile","placeholder","model","value","callback","$$v","expression","click","handleAddition","staticStyle","width","margin-top","border","prop","label","scopedSlots","_u","key","fn","scope","src","imageUrl","height","margin-left","$event","editTemplate","$index","visible","dialogFormVisible","update:visible","label-width","formLabelWidth","auto-complete","$set","handleUpdation","background","layout","current-page","total","total_page","current-change","handleCurrentChange","staticRenderFns","Component","__webpack_require__","normalizeComponent","Gift","ssrContext","__webpack_exports__"],"mappings":"wMA2IA,wCACA,wCACA,6CACA,4CAIA,SAEA,QAEA,YAGA,uBAEA,qBAGA,qBAIA,QACA,YACA,YAGA,+BAIA,iBAEA,YACA,cAGA,4BAIAA,iFAKA,0DAKA,uEAMAC,iBACAC,0CAIAD,uBAIA,IAAAE,EAAAC,iBACAA,KAAAC,SAEAC,+FAGAC,sCAEAA,8DAOAC,OACAR,6DAQA,IAAAS,EAAAL,uCAGA,uBAEA,sCAEA,+CAIA,WAEAM,yBACAC,yBACAC,4BAEAC,mDAEA,4BAEA,kDAGAC,GAAAC,KAAA,SAAAC,UAEA,2BACAA,KAEAhB,kBAGA,UAEA,sCAEAiB,eACA,oCACAA,gBA7BA,iDAqCA,8BAEAC,2BAEA,yCAMA,IAAAC,EAAAf,OAIAA,iBACAgB,WACAC,+CACAC,iCAEAR,2CACAA,GAAAC,KAAA,SAAAC,uBAKAO,2EAEA,sBAGAP,UACA,6BAEA,IACAhB,cAGA,WACAU,sDACA,iCAEAU,6CAGAI,GAAAT,KAAA,SAAAC,sBAEAA,wBACA,SACA,UAGAhB,6CAEAiB,eACA,sCACAA,yCAIAA,QC5UAQ,GADiBC,OAFjB,WAA0B,IAAAC,EAAAvB,KAAawB,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,WAAqBF,EAAA,iBAAsBG,OAAOC,UAAA,OAAiBJ,EAAA,sBAAAA,EAAA,KAAmCE,YAAA,iBAA2BL,EAAAQ,GAAA,gCAAAR,EAAAQ,GAAA,KAAAL,EAAA,sBAAAH,EAAAQ,GAAA,kBAAAR,EAAAQ,GAAA,KAAAL,EAAA,WAAiIE,YAAA,aAAuBF,EAAA,KAAUE,YAAA,cAAwBL,EAAAQ,GAAA,UAAAR,EAAAQ,GAAA,KAAAL,EAAA,UAA4CE,YAAA,aAAuBF,EAAA,UAAeG,OAAOG,KAAA,KAAUN,EAAA,QAAAH,EAAAQ,GAAA,cAAAR,EAAAQ,GAAA,KAAAL,EAAA,SAA0DO,IAAA,iBAAAL,YAAA,OAAAC,OAA+CK,KAAA,OAAAC,KAAA,OAAAC,OAAA,kCAAsEC,IAAKC,OAAAf,EAAAgB,eAAyB,GAAAhB,EAAAQ,GAAA,KAAAL,EAAA,UAA+BE,YAAA,aAAuBF,EAAA,UAAeG,OAAOG,KAAA,KAAUN,EAAA,QAAAH,EAAAQ,GAAA,YAAAR,EAAAQ,GAAA,KAAAL,EAAA,UAAyDG,OAAOG,KAAA,KAAUN,EAAA,YAAiBG,OAAOW,YAAA,SAAsBC,OAAQC,MAAAnB,EAAA,MAAAoB,SAAA,SAAAC,GAA2CrB,EAAAf,MAAAoC,GAAcC,WAAA,YAAqB,OAAAtB,EAAAQ,GAAA,KAAAL,EAAA,UAAmCE,YAAA,aAAuBF,EAAA,UAAeG,OAAOG,KAAA,KAAUN,EAAA,QAAAH,EAAAQ,GAAA,YAAAR,EAAAQ,GAAA,KAAAL,EAAA,UAAyDG,OAAOG,KAAA,KAAUN,EAAA,YAAiBG,OAAOW,YAAA,WAAwBC,OAAQC,MAAAnB,EAAA,KAAAoB,SAAA,SAAAC,GAA0CrB,EAAAd,KAAAmC,GAAaC,WAAA,WAAoB,OAAAtB,EAAAQ,GAAA,KAAAL,EAAA,UAAAA,EAAA,UAAgDG,OAAOG,KAAA,KAAUN,EAAA,QAAAH,EAAAQ,GAAA,SAAAR,EAAAQ,GAAA,KAAAL,EAAA,UAAsDG,OAAOG,KAAA,KAAUN,EAAA,aAAkBE,YAAA,UAAAC,OAA6BM,KAAA,WAAiBE,IAAKS,MAAAvB,EAAAwB,kBAA4BxB,EAAAQ,GAAA,oBAAAR,EAAAQ,GAAA,KAAAL,EAAA,YAAwDsB,aAAaC,MAAA,OAAAC,aAAA,QAAmCrB,OAAQ1B,KAAAoB,EAAApB,KAAAgD,OAAA,MAA6BzB,EAAA,mBAAwBG,OAAOuB,KAAA,MAAAC,MAAA,QAA2B9B,EAAAQ,GAAA,KAAAL,EAAA,mBAAoCG,OAAOwB,MAAA,QAAeC,YAAA/B,EAAAgC,KAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAAhC,EAAA,OAAkBG,OAAO8B,IAAAD,EAAA5C,IAAA8C,SAAAC,OAAA,eAA+CtC,EAAAQ,GAAA,KAAAL,EAAA,mBAAoCG,OAAOuB,KAAA,QAAAC,MAAA,QAA6B9B,EAAAQ,GAAA,KAAAL,EAAA,mBAAoCG,OAAOuB,KAAA,OAAAC,MAAA,QAA4B9B,EAAAQ,GAAA,KAAAL,EAAA,mBAAoCG,OAAOuB,KAAA,WAAAC,MAAA,MAAAJ,MAAA,SAA+C1B,EAAAQ,GAAA,KAAAL,EAAA,mBAAoCG,OAAOwB,MAAA,MAAaC,YAAA/B,EAAAgC,KAAsBC,IAAA,UAAAC,GAAA,SAAAC,GAAiC,OAAAhC,EAAA,aAAwBsB,aAAac,cAAA,QAAqBjC,OAAQM,KAAA,QAAcE,IAAKS,MAAA,SAAAiB,GAAyBxC,EAAAyC,aAAAN,EAAAO,OAAAP,EAAA5C,SAA4CY,EAAA,KAAUE,YAAA,iBAA2BL,EAAAQ,GAAA,0CAAgD,GAAAR,EAAAQ,GAAA,KAAAL,EAAA,aAAkCG,OAAOrB,MAAA,OAAAyC,MAAA,MAAAiB,QAAA3C,EAAA4C,mBAA6D9B,IAAK+B,iBAAA,SAAAL,GAAkCxC,EAAA4C,kBAAAJ,MAA+BrC,EAAA,WAAgBG,OAAOY,MAAAlB,EAAAN,QAAkBS,EAAA,gBAAqBG,OAAOwB,MAAA,KAAAD,KAAA,QAAAiB,cAAA9C,EAAA+C,kBAA8D5C,EAAA,YAAiBsB,aAAaC,MAAA,SAAgBpB,OAAQ0C,gBAAA,MAAAvC,KAAA,GAA+BS,OAAQC,MAAAnB,EAAAN,KAAA,MAAA0B,SAAA,SAAAC,GAAgDrB,EAAAiD,KAAAjD,EAAAN,KAAA,QAAA2B,IAAiCC,WAAA,iBAA0B,GAAAtB,EAAAQ,GAAA,KAAAL,EAAA,gBAAqCG,OAAOwB,MAAA,KAAAD,KAAA,OAAAiB,cAAA9C,EAAA+C,kBAA6D5C,EAAA,YAAiBG,OAAO0C,gBAAA,MAAAvC,KAAA,GAA+BS,OAAQC,MAAAnB,EAAAN,KAAA,KAAA0B,SAAA,SAAAC,GAA+CrB,EAAAiD,KAAAjD,EAAAN,KAAA,OAAA2B,IAAgCC,WAAA,gBAAyB,GAAAtB,EAAAQ,GAAA,KAAAL,EAAA,gBAAqCG,OAAOwB,MAAA,QAAAD,KAAA,WAAAiB,cAAA9C,EAAA+C,kBAAoE5C,EAAA,aAAkBsB,aAAaC,MAAA,SAAgBpB,OAAQW,YAAA,OAAoBC,OAAQC,MAAAnB,EAAAN,KAAA,SAAA0B,SAAA,SAAAC,GAAmDrB,EAAAiD,KAAAjD,EAAAN,KAAA,WAAA2B,IAAoCC,WAAA,mBAA6BnB,EAAA,aAAkBG,OAAOwB,MAAA,KAAAX,MAAA,QAA2BnB,EAAAQ,GAAA,KAAAL,EAAA,aAA8BG,OAAOwB,MAAA,MAAAX,MAAA,OAA2BnB,EAAAQ,GAAA,KAAAL,EAAA,aAA8BG,OAAOwB,MAAA,MAAAX,MAAA,OAA2BnB,EAAAQ,GAAA,KAAAL,EAAA,aAA8BG,OAAOwB,MAAA,MAAAX,MAAA,OAA2BnB,EAAAQ,GAAA,KAAAL,EAAA,aAA8BG,OAAOwB,MAAA,MAAAX,MAAA,OAA2BnB,EAAAQ,GAAA,KAAAL,EAAA,aAA8BG,OAAOwB,MAAA,MAAAX,MAAA,OAA2BnB,EAAAQ,GAAA,KAAAL,EAAA,aAA8BG,OAAOwB,MAAA,MAAAX,MAAA,OAA2BnB,EAAAQ,GAAA,KAAAL,EAAA,aAA8BG,OAAOwB,MAAA,MAAAX,MAAA,QAA2B,OAAAnB,EAAAQ,GAAA,KAAAL,EAAA,gBAAyCG,OAAOwB,MAAA,SAAAgB,cAAA9C,EAAA+C,kBAAmD5C,EAAA,SAAcO,IAAA,iBAAAL,YAAA,OAAAC,OAA+CK,KAAA,OAAAC,KAAA,OAAAC,OAAA,kCAAsEC,IAAKC,OAAAf,EAAAgB,cAAyBhB,EAAAQ,GAAA,KAAAL,EAAA,KAAAH,EAAAQ,GAAA,6BAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAAgFE,YAAA,yBAAmCF,EAAA,aAAkBG,OAAOM,KAAA,WAAiBE,IAAKS,MAAAvB,EAAAkD,kBAA4BlD,EAAAQ,GAAA,SAAAR,EAAAQ,GAAA,KAAAL,EAAA,aAA8CW,IAAIS,MAAA,SAAAiB,GAAyBxC,EAAA4C,mBAAA,MAAgC5C,EAAAQ,GAAA,iBAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAAgDE,YAAA,eAAyBF,EAAA,iBAAsBG,OAAO6C,WAAA,GAAAC,OAAA,oBAAAC,eAAArD,EAAArB,SAAA2E,MAAAtD,EAAAuD,YAAgGzC,IAAK0C,iBAAAxD,EAAAyD,wBAA0C,QAEnzJC,oBCCjB,IAcAC,EAdAC,EAAA,OAcAC,CACAC,EACAhE,GATA,EAVA,SAAAiE,GACAH,EAAA,SAaA,kBAEA,MAUAI,EAAA,QAAAL,EAAA","file":"static/js/4.12b04a96e5d56852de6a.js","sourcesContent":["<template>\n  <div class=\"table\">\n    <div class=\"crumbs\">\n      <el-breadcrumb separator=\"/\">\n        <el-breadcrumb-item><i class=\"el-icon-menu\"></i>\n          礼物管理\n        </el-breadcrumb-item>\n        <el-breadcrumb-item>礼物列表</el-breadcrumb-item>\n      </el-breadcrumb>\n    </div>\n\n    <el-card class=\"box-card\">\n      <p class=\"add-title\">添加礼物</p>\n      <el-row class=\"add-item\">\n\n        <!-- 上传模板图片 -->\n        <el-col :span=\"5\">\n          <span>上传礼物图片</span>\n        </el-col>\n\n           <!--模仿图片上传-->\n          <input class=\"file\" name=\"file\" type=\"file\" accept=\"image/png,image/gif,image/jpeg\" ref=\"templateImgSrc\" @change=\"changeFile\"/>\n\n      </el-row>\n      <el-row class=\"add-item\">\n        <el-col :span=\"5\">\n          <span>礼物名称</span>\n        </el-col>\n        <el-col :span=\"5\">\n          <el-input v-model=\"title\" placeholder=\"请输入名称\"></el-input>\n        </el-col>\n      </el-row>\n\n\n      <el-row class=\"add-item\">\n        <el-col :span=\"5\">\n          <span>礼物价格</span>\n        </el-col>\n        <el-col :span=\"5\">\n          <el-input v-model=\"text\" placeholder=\"请输入礼物价格\"></el-input>\n        </el-col>\n      </el-row>\n\n      <el-row>\n        <el-col :span=\"5\">\n          <span>&nbsp;</span>\n        </el-col>\n        <el-col :span=\"5\">\n          <el-button @click=\"handleAddition\" type=\"success\" class=\"add-btn\">添加</el-button>\n        </el-col>\n      </el-row>\n\n    </el-card>\n\n    <!-- 数据渲染 -->\n    <el-table :data=\"data\" border style=\"width:100%; margin-top:20px;\">\n      <el-table-column prop=\"_id\" label=\"id\"></el-table-column>\n\n      <el-table-column label=\"模板图片\">\n        <template slot-scope=\"scope\">\n          <img :src=\"scope.row.imageUrl\" height=\"50\"/>\n        </template>\n      </el-table-column>\n\n      <el-table-column prop=\"title\" label=\"标题\"></el-table-column>\n      <el-table-column prop=\"text\" label=\"文案\"></el-table-column>\n\t  <el-table-column prop=\"priority\" label=\"优先级\" width=\"60%\"></el-table-column>\n\n      <el-table-column label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"text\" @click=\"editTemplate(scope.$index, scope.row)\" style=\"margin-left:10px;\">\n            <i class=\"el-icon-edit\"></i>\n            修改\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n\n    <!--修改信息 弹框 -->\n    <el-dialog title=\"修改信息\" width=\"70%\" :visible.sync=\"dialogFormVisible\">\n      <el-form :model=\"form\">\n        <el-form-item label=\"标题\" prop=\"title\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"form.title\" auto-complete=\"off\" :span=\"5\" style=\"width:250px\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"文案\" prop=\"text\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"form.text\" auto-complete=\"off\" :span=\"5\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"新的优先级\" prop=\"priority\" :label-width=\"formLabelWidth\">\n          <el-select v-model=\"form.priority\" placeholder=\"请选择\" style=\"width:120px\">\n            <el-option label=\"禁用\" value=\"-1\"></el-option>\n            <el-option label=\"优先1\" value=\"1\"></el-option>\n            <el-option label=\"优先2\" value=\"2\"></el-option>\n            <el-option label=\"优先3\" value=\"4\"></el-option>\n            <el-option label=\"优先4\" value=\"5\"></el-option>\n            <el-option label=\"优先5\" value=\"5\"></el-option>\n            <el-option label=\"优先6\" value=\"6\"></el-option>\n            <el-option label=\"优先7\" value=\"7\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"新的模板图片\" :label-width=\"formLabelWidth\">\n           <!--\n\t\t    <img src=\" \" style=\"width:120px;height:120px\"/>\n\t\t\t<el-button class=\"chooseImgBtn\">选择图片</el-button>\n\t\t   -->\n\t\t    <input class=\"file\" name=\"file\" type=\"file\" accept=\"image/png,image/gif,image/jpeg\" ref=\"templateNewImg\" @change=\"changeFile\"/>\n\t\t\t<p>(若不想更改图片，可以不进行选择)</p>\n        </el-form-item>\n\n\n      </el-form>\n      <div class=\"dialog-footer-center\">\n        <el-button type=\"success\"  @click=\"handleUpdation\">确 定</el-button>\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- 底部分页 -->\n    <div class=\"pagination\">\n      <el-pagination\n        @current-change=\"handleCurrentChange\"\n        background\n        layout=\"prev, pager, next\"\n        :current-page=\"cur_page\"\n        :total=\"total_page\">\n      </el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\n  import moment from 'moment';\n  import {setNewVal} from '@/assets/utils.js';\n\n\n  export default {\n    data() {\n      return {\n        getTemplateUrl: '/api/getAllTemplate',\n        createTemplateUrl: '/api/createTemplate',\n        updateTemplateUrl: '/api/updateTemplate',\n        modifyTemplateImageUrl: '/api/modifyTemplateImage',\n        data: [],\n        // 上传模板图片\n        imageUrl: '',\n\n        // 添加模板\n        title: '',\n        text: '',\n\n        // 下拉框\n        Priority: '',\n\n        // 弹出框\n        dialogTableVisible: false,\n        dialogFormVisible: false,\n\n\n\t\t// 修改表单显示信息\n        form: {\n\t\t  _id:'',   // 模板标识\n          title: '',\n          text: '',\n\t\t  imageUrl:'',\n\t\t  priority:''\n        },\n\n        fileList: [],\n\n        formLabelWidth: '120px',\n\n        // 分页\n        pageSize: 50,\n        cur_page: 1,\n        totalLength: 0,\n\n      }\n    },\n\n    mounted() {   // 一上来就渲染数据\n      this.getData();\n    },\n    computed: {\n      // 总页数\n      total_page() {\n        return (this.totalLength / this.pageSize) * 10;\n      },\n    },\n    filters: {\n      dateFormat(el) {\n        return moment(el).format('YYYY-MM-DD HH:mm:ss');\n      }\n    },\n    methods: {\n      // err\n      err(content, data) {\n        this.$message.info(content);\n        console.log(data.msg);\n      },\n      // info\n      info(content) {\n        this.$message.info(content);\n      },\n\n      // 获取所有数据\n      getData() {\n        const {pageSize, cur_page} = this;\n        const params = {pageSize, cur_page};\n\n        this.$axios.post(this.getTemplateUrl, params).then((data) => {\n          // data, totalLenth\n          setNewVal(this, data);\n\t\t}).catch((data)=> {\n\t\t\tthis.err('获取数据失败', data);\n\t\t\tthis.data = [];\n\t\t});\n      },\n\n      // 分页\n      handleCurrentChange(val) {\n        this.cur_page = val;\n        this.getData();\n      },\n\t  changeFile() {\n\n\n\t  },\n      // 添加模板信息\n    handleAddition() {\n\n      // 模板图片\n      var templateImgSrc = this.$refs.templateImgSrc.files[0];\n\n      if( templateImgSrc === undefined ){\n        alert('请选择图片')\n      }else if( templateImgSrc.size > 2097152 ) {\n          alert('图片大于2M，资源过大会导致加载缓慢，请重新选择')\n      }else if(!this.title) {\n          alert('请填写标题')\n      }else {\n\n\t\t\t//创建form对象\n\t\t\tlet param = new FormData()\n\t\t\tparam.append('file', templateImgSrc)\n\t\t\tparam.append('title', this.title)\n\t\t\tparam.append('text', this.text)\n\n\t\t\tconsole.log(param.get('file'))  // FormData私有类对象，访问不到，可以通过get判断值是否传进去\n\t\t\tconsole.log(param.get('title'))\n\t\t\tconsole.log(param.get('text'))\n\n\t\t\t //添加请求头(内部已经设置有)\n\n\t\t\tthis.$axios.post2(this.createTemplateUrl,param)\n\t\t\t.then((response) => {\n\t\t\t\t  this.info('上传成功')\n\t\t\t\t  console.log('成功上传',response)\n\t\t\t\t  // 渲染数据\n\t\t\t\t  this.getData()\n\t\t\t\t  // this.$refs.templateImgSrc.files[0] = {};\n          // this.$refs.templateImgSrc.files = []\n\t\t\t\t  this.title=\"\"\n\t\t\t\t  this.text=\"\"\n\n\t\t\t}).catch((error)=> {\n\t\t\t\tthis.err('添加数据失败', error);\n\t\t\t\tconsole.log('------错误原因----------')\n\t\t\t\tconsole.log(error)\n\t\t\t})\n\t\t}\n\n      },\n\t\t// 弹出编辑界面对应信息\n\t\teditTemplate(index, row){\n\t\t\t// 输出行内数据\n\t\t\tconsole.log('----行内数据------')\n\t\t\tconsole.log(row)\n\n\t\t\t// 弹窗\n\t\t\tthis.dialogFormVisible = true;\n\t\t    // 数据赋值显示\n\t\t\tthis.form = row   // _id  title text priority\n\n\t    },\n\t\t// 修改更新\n\t\t handleUpdation() {\n\t\t\t/*alert(JSON.stringify(params));*/\n\n\t\t\tlet that = this\n\n\t\t\tconst templateId = this.form._id\n\t\t\tconst {title,text,priority} = this.form\n\t\t\tconst param = {templateId,title,text,priority }\n\t\t\tconsole.log(param)\n\n\t\t\tthis.$axios.post(this.updateTemplateUrl,param)\n\t\t\t.then((response) => {\n\t\t\t\t\t// do something further\n\n\t\t\t\t\t// 更改模板图片\n\t\t\t\t\tconsole.log(this.$refs.templateNewImg.files[0] === undefined)\n\t\t\t\t\tvar templateNewImg = this.$refs.templateNewImg.files[0]\n\n\t\t\t\t\t// 1. 不需要进行模板图片修改\n\t\t\t\t\tif(templateNewImg === undefined ) {\n\t\t\t\t\t\tconsole.log('修改成功',response)\n\t\t\t\t\t\tthat.info('修改成功')\n\t\t\t\t\t\t// 关闭弹窗\n\t\t\t\t\t\tthat.dialogFormVisible = false;\n\t\t\t\t\t\tthat.getData()\n\t\t\t\t\t}\n\t\t\t\t\t// 2. 进行模板图片修改\n\t\t\t\t\telse {\n\t\t\t\t\t\tlet param = new FormData()\n\t\t\t\t\t\tparam.append('file', this.$refs.templateNewImg.files[0])\n\t\t\t\t\t\tparam.append('templateId', this.form._id)\n\n\t\t\t\t\t\t //添加请求头 (已经内置有)\n\n\t\t\t\t\t\tthis.$axios.post2(this.modifyTemplateImageUrl,param)\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\tconsole.log('修改成功',response)\n\t\t\t\t\t\t\tthat.dialogFormVisible = false;\n\t\t\t\t\t\t\tthat.info('修改成功')\n\t\t\t\t\t\t\t// 重新渲染数据\n\t\t\t\t\t\t\tthat.getData()\n\n\t\t\t\t\t\t}).catch((error)=> {\n\t\t\t\t\t\t\tthis.err('修改数据失败', error);\n\t\t\t\t\t\t\tconsole.log('------修改失败原因----------')\n\t\t\t\t\t\t\tconsole.log(error)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t}).catch((error)=> {\n\t\t\t\t this.err('修改数据失败', error);\n\t\t\t})\n\t    },\n\n    }\n  }\n</script>\n\n<style scoped>\n  .add-title {\n    font-size: 18px;\n    /*background-color: pink;*/\n    padding-bottom: 6px;\n    border-bottom: 1px solid #ccc;\n\n  }\n\n  .add-item {\n    vertical-align: middle;\n    margin-top: 20px;\n  }\n\n  /*上传图片样式*/\n  .avatar-uploader {\n    border: 2px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n    width: 120px;\n    height: 120px;\n    /* margin:10px 0 10px 50px; */\n    /*background-color: pink;*/\n  }\n\n  .avatar-uploader:hover {\n    border-color: #409EFF;\n  }\n\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 120px;\n    height: 120px;\n    line-height: 120px;\n    text-align: center;\n  }\n\n  .avatar {\n    width: 120px;\n    height: 120px;\n    display: inline-block;\n  }\n\n  /* 输入框 */\n  .handle-input {\n    width: 240px;\n    margin-top: 0px;\n    display: inline-block;\n  }\n\n  .text-input {\n    width: 900px;\n    margin-top: 0;\n  }\n\n  .add-btn {\n    /* margin: 40px 20px 20px 70px; */\n    margin-top: 20px;\n  }\n\n  /* 弹框 */\n  .chooseImgBtn {\n    position: relative;\n    top: -50px;\n    left: 20px;\n  }\n\n  .dialog-footer-center {\n    text-align: center;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/page/Gift.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"table\"},[_c('div',{staticClass:\"crumbs\"},[_c('el-breadcrumb',{attrs:{\"separator\":\"/\"}},[_c('el-breadcrumb-item',[_c('i',{staticClass:\"el-icon-menu\"}),_vm._v(\"\\n          礼物管理\\n        \")]),_vm._v(\" \"),_c('el-breadcrumb-item',[_vm._v(\"礼物列表\")])],1)],1),_vm._v(\" \"),_c('el-card',{staticClass:\"box-card\"},[_c('p',{staticClass:\"add-title\"},[_vm._v(\"添加礼物\")]),_vm._v(\" \"),_c('el-row',{staticClass:\"add-item\"},[_c('el-col',{attrs:{\"span\":5}},[_c('span',[_vm._v(\"上传礼物图片\")])]),_vm._v(\" \"),_c('input',{ref:\"templateImgSrc\",staticClass:\"file\",attrs:{\"name\":\"file\",\"type\":\"file\",\"accept\":\"image/png,image/gif,image/jpeg\"},on:{\"change\":_vm.changeFile}})],1),_vm._v(\" \"),_c('el-row',{staticClass:\"add-item\"},[_c('el-col',{attrs:{\"span\":5}},[_c('span',[_vm._v(\"礼物名称\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":5}},[_c('el-input',{attrs:{\"placeholder\":\"请输入名称\"},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}})],1)],1),_vm._v(\" \"),_c('el-row',{staticClass:\"add-item\"},[_c('el-col',{attrs:{\"span\":5}},[_c('span',[_vm._v(\"礼物价格\")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":5}},[_c('el-input',{attrs:{\"placeholder\":\"请输入礼物价格\"},model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}})],1)],1),_vm._v(\" \"),_c('el-row',[_c('el-col',{attrs:{\"span\":5}},[_c('span',[_vm._v(\" \")])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":5}},[_c('el-button',{staticClass:\"add-btn\",attrs:{\"type\":\"success\"},on:{\"click\":_vm.handleAddition}},[_vm._v(\"添加\")])],1)],1)],1),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\",\"margin-top\":\"20px\"},attrs:{\"data\":_vm.data,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"prop\":\"_id\",\"label\":\"id\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"模板图片\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{attrs:{\"src\":scope.row.imageUrl,\"height\":\"50\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"title\",\"label\":\"标题\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"text\",\"label\":\"文案\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"priority\",\"label\":\"优先级\",\"width\":\"60%\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"text\"},on:{\"click\":function($event){_vm.editTemplate(scope.$index, scope.row)}}},[_c('i',{staticClass:\"el-icon-edit\"}),_vm._v(\"\\n            修改\\n          \")])]}}])})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"修改信息\",\"width\":\"70%\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.form}},[_c('el-form-item',{attrs:{\"label\":\"标题\",\"prop\":\"title\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{staticStyle:{\"width\":\"250px\"},attrs:{\"auto-complete\":\"off\",\"span\":5},model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"文案\",\"prop\":\"text\",\"label-width\":_vm.formLabelWidth}},[_c('el-input',{attrs:{\"auto-complete\":\"off\",\"span\":5},model:{value:(_vm.form.text),callback:function ($$v) {_vm.$set(_vm.form, \"text\", $$v)},expression:\"form.text\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"新的优先级\",\"prop\":\"priority\",\"label-width\":_vm.formLabelWidth}},[_c('el-select',{staticStyle:{\"width\":\"120px\"},attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.form.priority),callback:function ($$v) {_vm.$set(_vm.form, \"priority\", $$v)},expression:\"form.priority\"}},[_c('el-option',{attrs:{\"label\":\"禁用\",\"value\":\"-1\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"优先1\",\"value\":\"1\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"优先2\",\"value\":\"2\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"优先3\",\"value\":\"4\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"优先4\",\"value\":\"5\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"优先5\",\"value\":\"5\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"优先6\",\"value\":\"6\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"优先7\",\"value\":\"7\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"新的模板图片\",\"label-width\":_vm.formLabelWidth}},[_c('input',{ref:\"templateNewImg\",staticClass:\"file\",attrs:{\"name\":\"file\",\"type\":\"file\",\"accept\":\"image/png,image/gif,image/jpeg\"},on:{\"change\":_vm.changeFile}}),_vm._v(\" \"),_c('p',[_vm._v(\"(若不想更改图片，可以不进行选择)\")])])],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer-center\"},[_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":_vm.handleUpdation}},[_vm._v(\"确 定\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")])],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"pagination\"},[_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"current-page\":_vm.cur_page,\"total\":_vm.total_page},on:{\"current-change\":_vm.handleCurrentChange}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-6cd6c950\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/components/page/Gift.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6cd6c950\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./Gift.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./Gift.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./Gift.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6cd6c950\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./Gift.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6cd6c950\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/page/Gift.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}